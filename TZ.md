# Техническое задание  
MVP веб-платформы СРО НОСО (локальный запуск)

## 1. Цель и контекст MVP
- Создать минимально жизнеспособный продукт (MVP) для кандидатов и членов СРО НОСО  
- Ключевые функции:
  - Каталог документов с поиском и просмотром
- ИИ-консультант на базе RAG и YandexGPT-lite API

## 2. Функциональные требования

### 2.1 Каталог документов (/documents)
- Доступ без авторизации
- До 30 PDF-файлов
- Простой поиск по названию
- Просмотр документов в модальном окне
- Только просмотр, без скачивания

### 2.2 ИИ-консультант (/chat)
- Доступ без авторизации
- YandexGPT-lite API + RAG на 16 документах
- Два режима поиска: документы (по документам целиком) и чанки (по частям документов)
- Ответы на русском языке
- Быстрые кнопки с готовыми запросами
- История чата в пределах сессии
- Показ настроек режимов обработки запросов

## 3. Технический стек (упрощённый)
- Frontend:
  - React 18 + TypeScript
  - Vite 5
  - Tailwind CSS 3.4
  - Inter (Google Fonts)
  - Heroicons (SVG)
- Backend:
  - Node.js + Express
  - YandexGPT-lite API (интеграция)
  - Локальный запуск (localhost)
- Данные:
  - Статические PDF в /public/documents/
  - Метаданные в documents.json
  - Эмбеддинги в embeddings.json (чанки) и embeddings_docs.json (документы)

## 4. Архитектура решения

noso-webapp/
├── public/
│   ├── data/               # статические данные
│   │   └── documents.json  # метаданные документов
│   ├── documents/          # PDF-файлы (≤30)
│   └── index.html
├── src/
│   ├── components/         # React-компоненты
│   ├── contexts/           # React Context
│   ├── data/
│   │   ├── documents.json  # метаданные (для импорта в код)
│   │   └── embeddings.json # векторы для RAG
│   ├── hooks/              # кастомные хуки
│   ├── services/           # DeepSeek API
│   ├── utils/              # хелперы
│   └── views/              # страницы
├── scripts/
│   ├── generate-emb.cjs          # генерация эмбеддингов для чанков (экспорт в embeddings_docs.json)
│   ├── generate-embeddings.cjs   # генерация эмбеддингов для документов (экспорт в embeddings.json)
│   └── count-symbols.js          # подсчёт символов в файлах
├── server/
│   ├── routes/             # Express-роуты
│   └── server.js           # entry-point

## 5. Дизайн и UX
- Основной цвет: #0057B8
- Акценты: зелёный / красный для статусов
- Mobile-first, 320 px+
- Шрифт Inter

## 5. Хранение данных (Упрощенное)

- Документы:
  - Физические файлы: `/public/documents/*.pdf`
  - Метаданные: `/public/data/documents.json` (для API)
  - Эмбеддинги: `/src/data/embeddings.json`
```json
{
  "id": 1,
    "title": "Положение о ...»",
    "category": "Внутренние документы СРО",
    "filename": "Pol_o_chelenstve.pdf",
    "description": "Определяет порядок ...
}
```

## 6. Процесс запуска и разработки
- Установка зависимостей: `npm install`
- Запуск сервера: `npm run server` (порт 3001)
- Генерация эмбеддингов документов: `npm run generate-embeddings` (экспорт в public/data/embeddings.json)
- Генерация эмбеддингов чанков: `npm run generate-emb` (экспорт в public/data/embeddings_docs.json)
- Запуск фронтенда: `npm run dev` (порт 5173)
- Открыть: http://localhost:5173

## 7. Критерии приёмки
- Каталог загружается мгновенно
- Поиск работает без задержек
- ИИ-консультант выдаёт контекстные ответы с источниками
- Документы открываются только для просмотра в модальном окне
- История чата сохраняется в сессии
- Корректное отображение на мобильных устройствах

## 8. Безопасность
- API-ключ DeepSeek в .env (не коммитить)
- Локальный запуск, персональных данных нет

## 9. Упрощения архитектуры
- Без Redux/MobX → React Context
- Без БД → JSON-файлы
- Статическое хранение документов
- История чата только в рамках сессии
